# Проект "Сервер картинок"
## Сервис для просмотра и хранения картинок в виде веб-приложения.
Функционал: пользователь заходит на сайт, загружает изображения,
а взамен получает прямые ссылки на них.
Эти ссылки можно использовать где угодно — в соцсетях, блогах или просто отправить друзьям.
## Требования.
- Python
- Nginx
- Docker
- Docker Compose
- PostgresSQL
## Установка и запуск
1. Клонируйте репозиторий:
    ```bash
    git clone [https://github.com/yourusername/task_management_app.git](https://github.com/dans1970/ImageHost.git)  
    ```
2. Запустите контейнеры:
    ```bash
    docker compose up --build
    ```
3. Откройте браузер и перейдите по адресу:
    - `http://localhost`
## Cтруктура проекта.
  ```
  project/
   ├── app.py                # Python-бэкенд
   ├── requirements.txt      # Зависимости Python
   ├── Dockerfile            # Dockerfile для Python-бэкенда
   ├── compose.yaml          # Конфигурация Docker Compose
   ├── nginx.conf            # Конфигурация Nginx
   ├── images/               # Папка для хранения загруженных изображений (volume)
   ├── logs/                 # Папка для логов (volume)
   ├── backups/              # Папка для хранения резервных копий
   └── static/               # Статические файлы (CSS/JS)
  ```
## **Функциональные требования**

###  Основной функционал:

**1. Главная страница**

- **Маршрут:** `/`
- Функциональность:
  - Встречает пользователя приветственным сообщением и рассказывает о сервисе.
  - Содержит ссылки на основные маршруты:
  - Страница загрузки изображений (`/upload`).
  - Каталог загруженных изображений (`/images/`).

**2. Загрузка изображений**

- **Маршрут:** `/upload`
- **Метод:** `POST`
- Функциональность:
   - Принимает файл изображения от пользователя через HTTP-запрос.
   - Поддерживаемые форматы: `.jpg`, `.png`, `.gif`.
   - Ограничение размера файла: до 5 МБ.
   - Генерирует уникальное имя для каждого загружаемого изображения.
   - Сохраняет изображение в папку `/images` на сервере.
   - Возвращает пользователю уникальный идентификатор файла и ссылку на изображение.
   - После загрузки изображения Python-бэкенд сохраняет метаданные в PostgreSQL:
     - уникальный идентификатор изображения;
     - сгенерированное имя файла;
     - оригинальное имя файла от пользователя;
     - размер файла в байтах;
     - дата и время загрузки;
     - формат файла.
   - Резервное копирование данных из БД.

**3. Доступ к загруженным изображениям**

- **Маршрут:** `/images/<имя_файла>`
- Функциональность:
   - Все загруженные изображения доступны для просмотра и скачивания по прямым ссылкам.
   - Nginx обслуживает этот маршрут, раздавая файлы из папки `/images`.

**4. Логирование действий**

- Функциональность:
  - Записывает каждое действие пользователя в лог-файл `app.log`.
- Формат записи:
   ```txt
   [Дата/время] Действие: сообщение
   ```
Примеры записей:
   ```text
   [2025-01-24 14:00:00] Успех: изображение img1.jpg загружено.
   [2025-01-24 14:01:00] Ошибка: неподдерживаемый формат файла (user_file.txt).
   ```

### **Безопасность.**

- **Проверка каждого файла перед загрузкой:**
- Принимаем только поддерживаемые форматы
- Следим за размером файла
- Только прямые ссылки от бэкенда
- Все ссылки вида `/images/название_файла`

### **Автор Дмитриев А.С.**
